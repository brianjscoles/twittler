<!--

var users = ["mracus", "sharksforcheap", "shawndrost", "calhoun"]

var streams = { 
  users :
    { mracus : 
        ["tweet1", "tweet 7"],
      shawndrost :
        ["tweet2", "tweet3", "tweet71"],
      sharksforcheap :
        ["tweet4","tweet5"],
      calhoun :
        ["tweet6","tweet9"]
    }
  home :
    ["tweet1","tweet2","tweet3", .... "tweet500"]
  }


-->





<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" type="text/css" href="twittler.css">  

  </head>
  <body>
    <div class="header"> TWITTLER </div>
    <br>
    
    <br><br>
    
    <div class="tweetspace" id="tweetspace"></div>
    <script>

      function postTweets(){
        while(index < streams.home.length){
          var tweet = streams.home[index];
              
          //creates a formatted date string e.g. [14:42:07]
          var dateString = '[' +  tweet.created_at.getHours() + 
                           ":" + (tweet.created_at.getMinutes()<10 ? '0' + tweet.created_at.getMinutes() : tweet.created_at.getMinutes()) +
                           ":" + (tweet.created_at.getSeconds()<10 ? '0' + tweet.created_at.getSeconds() : tweet.created_at.getSeconds()) + 
                           ']';

          var $tweet = $('<div></div>');
          $tweet.text(dateString + ' @' + tweet.user + ': ' + tweet.message);
          $tweet.appendTo($('.tweetspace'));
          var elem = document.getElementById('tweetspace');
          elem.scrollTop = elem.scrollHeight;
          index += 1;
        }
      }      

      //setup
      var index = 0;  
      var user = prompt("Welcome to Twittler! Please enter your username.","name");
      if(user===null) user = "anon";
      streams.users[user] = [];
      var $header = $('.header');
      $header.append("<div>Logged in as " + user + ".</div> <br> <div>Following: </div>");
      $header.append("<button class='active UsrButton'>Show All</button>");
      for (var i = 0; i < users.length; i++) {
        $header.append("<button class='UsrButton'> @" + users[i] + "</button>");
      }
      $header.append("<button class='UsrButton'> @" + user + "</button>");
      

      //watch for click.  makes the clicked button the only active one.
      $('.UsrButton').on('click',function(){
        $('.UsrButton').removeClass('active');
        $(this).addClass('active');

        //get the "userID" from the clicked button.
        //if "userID"=="all", display all
        //else: hide all tweets that don't match that userID.  show all that do.
      });
      
      postTweets();

      setInterval(function(){
        //add check here: only continue if "auto" is set to "on."
        postTweets();    
      },1500);



    </script>
  </body>
</html>


